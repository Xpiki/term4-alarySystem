<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>系统管理页</title>
    <link href="view/public/css/login.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="view/public/css/home.css">
    <script src="view/public/vue.js"></script>
    <script src="view/public/axios.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
</head>

<body>
    <div class="all">
        <div class="top">
            <div class="topLeft">
                <span>员工工资管理</span>
            </div>
            <div class="topRight">
                <span class="loginMsg">欢迎：<label v-text="username"></label></span>
                <span class="loginMsg" @click="exit()">退出登录</span>
            </div>
        </div>

        <div class="main">
            <div class="navLeft">
                <ul class="my_ui">
                    <li v-for="(tab,i) in lis" @click="toIfream(tab,i)" :class="{'bg':tab.showBg}"><i :class="tab.icon"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{tab.text}}</li>
                </ul>
            </div>
            <div class="iframe">
                <iframe :src="iframes[iframeIndex]"></iframe>
            </div>
        </div>
    </div>

</body>


<script>
    window.onload = function() {
        var vm = new Vue({
            el: '.all',
            data: {
                active: true,
                bg: '',
                iframeIndex: 0,
                lis: [{
                    icon: 'fas fa-home',
                    text: '主页',
                    showBg: true
                }, {
                    icon: 'fas fa-apple-alt',
                    text: '部门管理',
                    showBg: false
                }, {
                    icon: 'fas fa-apple-alt',
                    text: '员工管理',
                    showBg: false
                }, {
                    icon: 'fas fa-apple-alt',
                    text: '工资单修改',
                    showBg: false
                }, {
                    icon: 'fas fa-apple-alt',
                    text: '工资管理',
                    showBg: false
                }, {
                    icon: 'far fa-address-card',
                    text: '个人信息',
                    showBg: false
                }, {
                    icon: 'far fa-comments',
                    text: '发布消息',
                    showBg: false
                }],
                iframes: [
                    'view/homeChild.html',
                    'view/manageDepartment.html',
                    'view/manageStaff.html',
                    'view/manageStaff.html',
                    'view/manageStaff.html',
                    'view/manageStaff.html',
                    'view/manageStaff.html',
                ],
                username: "132"
            },
            created: function() {
                const that = this;
                axios.get('http://localhost:8080/GetSelfServlet').then(function(res) {
                    that.username = res.data[0].username;
                    console.log(that.username);
                })
            },
            methods: {
                toIfream(tab, i) {
                    this.lis.forEach(function(item) {
                        item.showBg = false;
                    });
                    this.iframeIndex = i;
                    tab.showBg = true;
                },
                exit() {
                    window.location.href = 'http://localhost:8080/ExitServlet';
                }
            }
        })
    }
</script>

</html>